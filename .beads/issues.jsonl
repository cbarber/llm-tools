{"id":"llm-tools-02x","title":"Implement pre-edit hook: guidelines and git status","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T03:55:30.95678301Z","created_by":"cbarber","updated_at":"2026-01-03T03:56:24.136060882Z","closed_at":"2026-01-03T03:56:24.136060882Z","close_reason":"Duplicate tasks, using llm-tools-8ni series instead"}
{"id":"llm-tools-0ae","title":"spr crashes with expired GitHub token","description":"spr segfaults when GitHub token expires instead of showing helpful error message. Need better error handling for auth failures.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-31T02:02:14.386282948Z","created_by":"cbarber","updated_at":"2026-01-31T02:02:14.386282948Z"}
{"id":"llm-tools-0dj","title":"Add reply context to forge pr comments output","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T01:59:09.715847677Z","created_by":"cbarber","updated_at":"2026-01-03T02:11:38.855494825Z","closed_at":"2026-01-03T02:11:38.855494825Z","close_reason":"Implemented in commit 372b38a"}
{"id":"llm-tools-0jy","title":"Add next-session handoff prompt to session completion template","description":"Problem: The 'Landing the Plane' section in AGENTS.md step 7 says 'Hand off - Provide context for next session' but doesn't specify the format. This causes agents to provide summaries TO the user instead of preparing a prompt FOR the next AI session, breaking continuity between sessions.\n\nProposed Solution:\nUpdate both agents/templates/default.md (shared template) and AGENTS.md (this repo's instructions) to clarify step 7 should produce a ready-to-paste prompt containing:\n- Current repository state (branch, commit hash, working tree status)\n- What was just completed (closed issues, commits pushed)\n- Ready issues with IDs and priorities\n- Important context for continuity\n\nExample format:\n```\n## Next Session Prompt\n\nCurrent State (YYYY-MM-DD)\n- Branch: main (abc1234)\n- Working tree: clean\n- Recent work: [summary]\n\nReady Issues:\n1. issue-id (P1): Title\n   - Key context\n\n2. issue-id (P2): Title\n   - Key context\n\nContext:\n- Important details for next session\n```\n\nThis ensures the next AI session has proper context without requiring the user to manually brief it.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T20:42:43.994565298-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:45:09.286013179-05:00","closed_at":"2025-12-27T20:45:09.286013179-05:00","close_reason":"Added explicit handoff prompt format to AGENTS.md and agents/templates/default.md"}
{"id":"llm-tools-15x","title":"Improve precision in agents/templates/default.md word choices","description":"## Context\n\nAudit identified 13 imprecise word choices in agents/templates/default.md that reduce clarity:\n- Ambiguous terms ('terse', 'strategic', 'quality gates')\n- Vague directives ('if necessary', 'side effects', 'check state')\n- Negative framing (what NOT to do vs what TO do)\n- Passive voice obscuring agency\n- Jargon lacking operational definitions\n\n## Decision Criteria\n\nWhen revising word choices:\n1. **Precision over brevity** - Choose terms with single clear interpretation\n2. **Positive directives** - Specify desired behavior, not prohibited behavior\n3. **Concrete over abstract** - Prefer actionable terms ('run git status' vs 'check state')\n4. **Active voice** - Make agent responsibility explicit\n5. **No jargon** - Replace domain terms with plain language when possible\n6. **Maintain terseness** - Edits should maintain or reduce line length\n\n## Reconciliation Required\n\n**CRITICAL**: Changes to default.md must be reconciled with AGENTS.md:\n- AGENTS.md is the canonical source used by this repository\n- default.md is the template for user repositories\n- Both files share overlapping guidelines (commit format, PR workflow, session completion)\n- Word choice improvements should apply consistently to both files\n\n**Process:**\n1. Read current AGENTS.md to identify matching sections\n2. Apply precision improvements to default.md\n3. Backport applicable changes to AGENTS.md\n4. Verify both files use consistent terminology\n5. Test that improved language doesn't conflict with existing workflows\n\n**Example conflicts to check:**\n- 'terse' appears in both files - ensure consistent replacement\n- Commit message guidance duplicated - update both\n- Session completion checklist - verify step wording matches\n\nNote: Audit was performed on specific line numbers that may shift if template evolves before this work begins.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-01T06:19:11.666652997Z","created_by":"cbarber","updated_at":"2026-01-01T06:20:19.991389998Z"}
{"id":"llm-tools-1us","title":"Research Jujutsu (jj) for agent workflows","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T17:56:32.608234714Z","created_by":"cbarber","updated_at":"2026-01-01T17:58:13.408139498Z","closed_at":"2026-01-01T17:58:13.408139498Z","close_reason":"Closed"}
{"id":"llm-tools-23r","title":"refactor: deduplicate setup script logic","description":"Setup scripts have duplicated logic across agent types. Refactor to shared functions to reduce maintenance burden and enable easier addition of new agents.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T21:39:20.299447725-05:00","created_by":"cbarber","updated_at":"2025-12-29T21:39:31.768168402-05:00"}
{"id":"llm-tools-2al","title":"chore: remove redundant comments from codebase","description":"Codebase has accumulated redundant comments that should be cleaned up for better maintainability.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T21:39:19.258557012-05:00","created_by":"cbarber","updated_at":"2025-12-29T21:39:30.472025259-05:00"}
{"id":"llm-tools-2nk","title":"Improve /usr/bin mounting to be OS-agnostic","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T05:49:27.132536069Z","created_by":"cbarber","updated_at":"2026-01-11T05:49:27.132536069Z"}
{"id":"llm-tools-2wm","title":"Investigate combining pr-poll and forge into unified tool","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T05:08:11.26561538Z","created_by":"cbarber","updated_at":"2026-01-11T05:08:11.26561538Z"}
{"id":"llm-tools-2y8","title":"Test task creation","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T03:55:37.827763666Z","created_by":"cbarber","updated_at":"2026-01-03T03:56:02.041969567Z","closed_at":"2026-01-03T03:56:02.041969567Z","close_reason":"Test issue for output format validation"}
{"id":"llm-tools-44v","title":"Research modern Git workflows for agents","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T17:56:33.854455736Z","created_by":"cbarber","updated_at":"2026-01-01T17:58:13.414621944Z","closed_at":"2026-01-01T17:58:13.414621944Z","close_reason":"Closed"}
{"id":"llm-tools-48q","title":"Schedule weekly flake updates in GitHub Actions","description":"Create a GitHub Actions workflow that runs weekly (Sundays) to update flake.lock via 'nix flake update'. The workflow should create a PR for review before merging. This automates dependency updates while maintaining review control.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T23:08:32.374259995-05:00","created_by":"cbarber","updated_at":"2025-12-28T23:09:30.910276597-05:00","closed_at":"2025-12-28T23:09:30.910276597-05:00"}
{"id":"llm-tools-564","title":"Use #!/usr/bin/env sh in beads hook patches","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-11T05:49:26.039696262Z","created_by":"cbarber","updated_at":"2026-01-11T05:49:26.039696262Z"}
{"id":"llm-tools-5e0","title":"Explore webhook integration for async PR feedback","description":"Research and design webhook-based feedback loop for agent PR workflows.\n\n## Current State\n- Agent creates PR via forge\n- User reviews manually (CLI or web)\n- Agent must poll for comments manually\n\n## Goal\nExplore event-driven alternative where PR comments trigger agent notifications.\n\n## Research Questions\n1. GitHub webhooks: Can we receive PR comment events?\n2. Gitea webhooks: Similar capabilities?\n3. Integration patterns:\n   - Webhook ‚Üí Discord ‚Üí agent notification?\n   - Webhook ‚Üí local service ‚Üí inject into agent session?\n   - Webhook ‚Üí file/queue ‚Üí agent polls file?\n4. Security: How to authenticate webhook payloads?\n5. DX: Does this actually reduce friction vs manual polling?\n\n## Success Criteria\n- Document feasible webhook patterns\n- Prototype simplest approach\n- Decide: worth implementing vs manual check?\n\n## Related\n- kimaki Discord bot pattern (reference from earlier research)\n- May inform PR polling implementation (separate issue)\n","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T14:07:00.728711499-05:00","created_by":"cbarber","updated_at":"2025-12-29T14:07:09.131571556-05:00"}
{"id":"llm-tools-5lq","title":"Test worktree sync","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T05:08:57.370915072Z","created_by":"cbarber","updated_at":"2025-12-31T05:09:33.535400286Z","closed_at":"2025-12-31T05:09:33.535400286Z","close_reason":"Closed"}
{"id":"llm-tools-68g","title":"Implement macOS sandbox-exec compatibility for agent sandboxing","description":"Bubblewrap is Linux-only. Current implementation skips sandboxing on macOS (runs unsandboxed). Need macOS equivalent using sandbox-exec with profile matching bubblewrap restrictions. Profile needs: deny default, allow project directory r/w, allow /nix r/o, allow agent config dirs, allow SSH agent socket, allow network, block personal files. Different syntax than bubblewrap (scheme-like vs CLI args). Test on macOS to ensure SSH agent, nix operations, and language tooling work correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T13:15:16.529650484-05:00","created_by":"cbarber","updated_at":"2025-12-28T22:25:47.894131225-05:00","closed_at":"2025-12-28T22:25:47.894131225-05:00"}
{"id":"llm-tools-6dg","title":"Clarify handoff template to use actual forge pr status output","description":"The handoff template shows $(bash tools/forge pr status) but agents aren't actually executing it - they're just copying the template literally or guessing the PR state.\n\n## Problem\n\nAGENTS.md and default.md show:\n```\nPR Status:\n$(bash tools/forge pr status)\n```\n\nBut agents see this and either:\n1. Copy it literally without executing\n2. Guess the PR status (e.g., 'PR #9 is open' when it's actually merged)\n3. Don't run the command at all\n\n## Evidence\n\nIn the recent session, agent provided handoff with:\n```\nPR Status:\n‚úì PR #9 is open\n```\n\nWhen the actual output was:\n```\n‚ö†Ô∏è  Branch has merged PR #9 - consider: git checkout main\n```\n\n## Solution Options\n\n1. Make it more explicit: 'Run `bash tools/forge pr status` and paste output here'\n2. Change template to show example output with instruction to replace\n3. Add validation step: 'Verify PR status matches forge output'\n4. Different approach?\n\nNeed to make it crystal clear agents should execute the command and use actual output.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T23:14:01.875861258Z","created_by":"cbarber","updated_at":"2026-01-01T23:15:43.377442756Z","closed_at":"2026-01-01T23:15:43.377442756Z","close_reason":"Fixed in PR #10 - changed template from shell substitution to explicit execution instruction"}
{"id":"llm-tools-6dl","title":"Split template commit into atomic changes","description":"Commit e508a7c combines: 1) succinct template, 2) workflow revisions, 3) word choice (terse‚Üísuccinct). Split and reconcile with AGENTS.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T16:02:00.32071916Z","created_by":"cbarber","updated_at":"2025-12-31T16:02:00.32071916Z"}
{"id":"llm-tools-6ft","title":"Document interactive rebase commit injection technique as skill","description":"During stacked PR work, we discovered powerful git techniques for inserting commits into history:\n\n1. GIT_SEQUENCE_EDITOR='sed -i \"1s/^pick/edit/\"' git rebase -i \u003ccommit\u003e^ - inject commit after specific SHA\n2. GIT_EDITOR=true git rebase --continue - bypass vim prompts\n3. amend! commits for non-interactive message rewording\n\nThese should be documented as a skill or agent prompt pattern. Particularly useful for:\n- Fixing commits deep in PR stack without manual interactive rebase\n- Automating git workflows in agent environments\n- Rewriting commit messages without interactive prompts\n\nSee AGENTS.md commit workflow section for current documentation.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-31T02:05:31.83587473Z","created_by":"cbarber","updated_at":"2026-01-31T02:05:40.201215027Z"}
{"id":"llm-tools-6pb","title":"feat: add gemini-cli and aider agent environments","description":"Add support for gemini-cli and aider as agent environments with proper nix flake configurations and sandboxing.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-29T21:39:21.085243008-05:00","created_by":"cbarber","updated_at":"2025-12-29T21:39:33.060074224-05:00"}
{"id":"llm-tools-7u8","title":"Design git hooks for workflow enforcement","description":"Shell functions vs git hooks. Check existing hooks (beads), worktree compatibility, sandbox .git resolution","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T16:02:00.731465145Z","created_by":"cbarber","updated_at":"2025-12-31T16:02:00.731465145Z"}
{"id":"llm-tools-7ye","title":"Filter bot replies from PR notification change detection","description":"The pr-poll daemon currently triggers on ALL comment changes, including its own bot replies (marked with *ü§ñ Posted by agent*). This causes duplicate notifications when the agent replies to PR feedback.\n\n**Solution:** Filter bot-posted comments from the change detection logic in pr-poll - don't count bot replies when calculating comment_count changes.\n\n**Important:** This filtering is ONLY for notification triggers. The 'forge pr comments' output should still show bot replies to preserve full thread context.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-03T01:59:09.249765942Z","created_by":"cbarber","updated_at":"2026-01-03T02:11:38.850519317Z","closed_at":"2026-01-03T02:11:38.850519317Z","close_reason":"Implemented in commit 372b38a"}
{"id":"llm-tools-8jk","title":"Decide PR notification strategy for multi-session work","description":"**Root cause:** PR detection uses message scanning for '/pull/NUMBER' URLs, which misses sessions that mention 'PR #12' without full URLs AND creates false positives from casual mentions.\n\n**Better approach:** Check git branch instead of scanning messages.\n\n## Proposed Solution\n\n**Use git branch as source of truth:**\n1. Get session's working directory from anvil\n2. Check `git branch --show-current` in that directory\n3. Look up PR number for that branch (`gh pr list --head BRANCH`)\n4. That's the active PR for the session\n\n**Benefits:**\n- No false positives from casual PR mentions\n- Catches all active work (commits, reviews, comments)\n- Works even if session never mentions PR number in chat\n- Reliable single source of truth\n\n**Implementation:**\nUpdate pr-notify and pr-poll to:\n- Get session directory from anvil API\n- Run git commands in that directory\n- Map branch ‚Üí PR number\n- Skip sessions not on a PR branch\n\n**Edge cases:**\n- Sessions on main/non-PR branches: skip (not working on PR)\n- Sessions in different repos: already filtered by REPO_PATH\n- Detached HEAD: skip (edge case)\n\nPrevious approach tried to fix with session ordering (newest-first), but that doesn't address the root cause of unreliable PR detection.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T02:24:45.060902402Z","created_by":"cbarber","updated_at":"2026-01-03T02:54:01.27840467Z","closed_at":"2026-01-03T02:54:01.27840467Z","close_reason":"Fixed by sorting sessions by .time.updated instead of .time.created, and expanding PR detection to match 'PR #NUMBER' pattern. Commit b733fbd"}
{"id":"llm-tools-8ni","title":"Prototype Go workflow engine with basic hook system","description":"Build minimal Go binary with hook interface, git status integration, and JSON output. Validates architectural approach before full implementation.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T03:55:44.255240339Z","created_by":"cbarber","updated_at":"2026-01-03T04:18:39.36612371Z","closed_at":"2026-01-03T04:18:39.36612371Z","close_reason":"Design changed: extending temper (bash) instead of Go engine per PR #13 feedback"}
{"id":"llm-tools-8od","title":"Fix fix-beads-hooks idempotency bug","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-11T05:49:25.652943641Z","created_by":"cbarber","updated_at":"2026-01-11T05:49:25.652943641Z"}
{"id":"llm-tools-8ur","title":"Extract stacked PR workflow lessons into dedicated documentation","description":"The recent epic (15 PRs) surfaced valuable lessons:\n\nWORKFLOW DISCOVERIES:\n- spr requires branch tracking origin/main (not feature branch)\n- Branch names must use dashes, not slashes (spr fails otherwise)\n- git-absorb automates fixup creation (stage changes, run absorb, autosquash)\n- Each commit becomes independent PR for parallel review\n- NEVER merge via GitHub UI (breaks stack)\n- NEVER use git push directly (use spr update)\n\nTOOLING IMPROVEMENTS NEEDED:\n- forge needed --paginate flag (was limited to 30 items)\n- pr-poll doesn't scale for stacked PRs (only sees PRs in session messages)\n- Cross-platform sandbox mounting via arrays (not BWRAP_ARGS directly)\n- Package version override system (overlays/default.nix)\n\nAGENT PATTERNS:\n- Interactive rebase techniques (GIT_SEQUENCE_EDITOR, GIT_EDITOR=true)\n- amend! for non-interactive commit message rewording\n- git rebase --autosquash (non-interactive, NEVER -i)\n\nThis knowledge should be:\n1. Consolidated into workflow guide\n2. Extracted into reusable skills/prompts\n3. Used to improve agent tooling defaults","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-31T02:05:53.627380288Z","created_by":"cbarber","updated_at":"2026-01-31T02:05:53.627380288Z"}
{"id":"llm-tools-8w9","title":"Prototype workflow boundary injection for OpenCode","description":"Build temper tool for OpenCode: extract markdown sections, inject at session start (plugin), commit (shell), PR create (shell). Simplify AGENTS.md structure for parsing.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T19:05:07.554419912Z","created_by":"cbarber","updated_at":"2025-12-31T19:28:48.134427927Z","closed_at":"2025-12-31T19:28:48.134427927Z","close_reason":"Prototype complete: temper tool built, injection points implemented (session start, commit, PR), tested successfully"}
{"id":"llm-tools-912","title":"Improve agent handoff template clarity","description":"Workflow gaps: handoff lacks next action, branch status ambiguous (continued on merged branch), too much detail in some sections","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T14:59:07.373336412Z","created_by":"cbarber","updated_at":"2025-12-31T15:00:54.627047414Z","closed_at":"2025-12-31T15:00:54.627047414Z","close_reason":"Template improved: added session start workflow, clearer branch lifecycle, mandatory next action in handoffs"}
{"id":"llm-tools-9rs","title":"Research Sapling for agent workflows","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T17:56:33.276933744Z","created_by":"cbarber","updated_at":"2026-01-01T17:58:13.412651521Z","closed_at":"2026-01-01T17:58:13.412651521Z","close_reason":"Closed"}
{"id":"llm-tools-ais","title":"Add agent/sandbox context to temper init output","description":"## Problem\n\nThe temper init output doesn't indicate:\n- Which agent tool the LLM is running in (Claude Code vs OpenCode vs other)\n- Whether the session is sandboxed or not\n\nThis causes confusion like:\n- Agent trying to use Claude Code commands in OpenCode\n- Not knowing which MCP tools/plugins are available\n- Unclear what environment constraints exist\n\n## Solution\n\nAdd context to temper init markdown output showing:\n1. Current agent (from env variable - need to identify which one)\n2. Sandbox status (from env variable - need to identify which one)\n\nExample output:\n```\nAgent: OpenCode\nSandbox: enabled\n\n## Workflow State\n...\n```\n\n## Implementation\n\nLikely goes in the markdown shell script that generates temper init output.\n\n## Investigation Needed\n\n- Which env variable indicates the current agent tool?\n- Which env variable indicates sandbox status?\n- Where does temper init generate its markdown output?","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T23:36:56.769463579Z","created_by":"cbarber","updated_at":"2026-01-01T23:38:23.293847416Z","closed_at":"2026-01-01T23:38:23.293847416Z","close_reason":"Implemented in commit - agent/sandbox context now shown in temper init"}
{"id":"llm-tools-ak0","title":"Refactor CLAUDE.local.md to AGENTS.md with CLAUDE.md symlink","description":"Reconcile CLAUDE.md and AGENTS.md by making AGENTS.md the primary file with CLAUDE.md as a symlink. This consolidates documentation and follows beads convention. Will require updating CLAUDE file checking logic in shell setup to handle symlinks. Currently we check for CLAUDE.md or CLAUDE.local.md - need to add AGENTS.md to precedence and create CLAUDE.md symlink when appropriate.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T18:20:02.501412493-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:22:20.590433067-05:00","closed_at":"2025-12-27T20:22:20.590433067-05:00","close_reason":"Refactored shell setup to use AGENTS.md as primary file with CLAUDE.md as symlink. Tested template creation and backward compatibility with existing CLAUDE.md files."}
{"id":"llm-tools-b2z","title":"fix: restrict macOS sandbox file read access","description":"macOS sandbox uses global (allow file-read*) copied from Codex, allowing reads of API keys, SSH keys, etc. This makes sandbox security theater. Need to whitelist specific read paths like Linux bubblewrap does.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-29T21:39:18.293209662-05:00","created_by":"cbarber","updated_at":"2025-12-29T21:55:39.325970388-05:00","closed_at":"2025-12-29T21:55:39.325970388-05:00"}
{"id":"llm-tools-bd5","title":"Test and validate bubblewrap agent sandboxing","description":"Verify the agent-sandbox.sh prototype actually works as intended. Test cases: 1) Can agent access files outside project dir? 2) Does mktemp work directory get created? 3) Is cleanup reliable on exit? 4) Do agents have necessary tool access (git, editors)? 5) Performance impact measurement. The exploration in llm-tools-yyo was closed prematurely - research and prototype don't equal validation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T20:57:44.693271035-05:00","created_by":"cbarber","updated_at":"2026-01-05T05:15:38.56551484Z","closed_at":"2026-01-05T05:15:38.56551484Z","close_reason":"All sandbox tests updated and passing. PR #16 created with comprehensive validation results."}
{"id":"llm-tools-bh9","title":"Investigate #setup shell for agent tooling","status":"in_progress","priority":3,"issue_type":"task","created_at":"2025-12-29T10:44:37.990703594-05:00","created_by":"cbarber","updated_at":"2025-12-29T17:03:12.318650961-05:00"}
{"id":"llm-tools-boh","title":"Review completed work incrementally instead of batch completing","description":"User feedback: I worked on three issues (llm-tools-0jy, llm-tools-bzj, llm-tools-yyo) without pausing for review after completing each one. Better approach: complete one issue, ask for user review/feedback, then proceed to next. This allows course correction and ensures work meets expectations before moving forward. Apply to future sessions.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T20:57:51.488278735-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:57:51.488278735-05:00"}
{"id":"llm-tools-bzj","title":"Support user-specific templates for CLAUDE/AGENTS.md","description":"Allow users to customize agent templates based on their username/GitHub handle. Potential approaches: 1) Nix flake variant: nix develop ~/src/llm-tools#claude-code.cbarber 2) Auto-detect from USER env var or git config user.name 3) Template directory structure: agents/claude-code/templates/{default,cbarber,etc}.md. Benefits: personalized instructions, team-specific workflows, easy to share common patterns. Depends on: llm-tools-ak0 (CLAUDE/AGENTS.md refactor). Consider: template precedence, fallback to default, documentation for creating custom templates.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T19:10:43.280685476-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:47:03.821065114-05:00","closed_at":"2025-12-27T20:47:03.821065114-05:00","close_reason":"Implemented user-specific template support with fallback to default","dependencies":[{"issue_id":"llm-tools-bzj","depends_on_id":"llm-tools-ak0","type":"blocks","created_at":"2025-12-27T19:10:52.254480336-05:00","created_by":"daemon"}]}
{"id":"llm-tools-cdg","title":"Implement deploy key automation and SSH agent config for sandboxed git operations","description":"Agent git push currently blocked without SSH keys. Need secure approach using deploy keys (not SSH agent confirmation which leads to fatigue). Tasks: 1) Create platform-specific agent keys (github/gitlab/gitea), 2) Build add-agent-deploy-key automation script using platform APIs, 3) Update sandbox to mount ONLY agent keys (not personal), 4) Document workflow for adding keys to new repos, 5) Consider auto-detection of missing deploy key on push failure. Deploy keys provide granular per-repo control without confirmation fatigue trap.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T13:14:50.873129937-05:00","created_by":"cbarber","updated_at":"2025-12-28T13:31:07.74751803-05:00","closed_at":"2025-12-28T13:31:07.74751803-05:00"}
{"id":"llm-tools-cnc","title":"Implement pr-poller core polling logic","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T23:42:58.029054147Z","created_by":"cbarber","updated_at":"2026-01-01T23:49:09.134190959Z","closed_at":"2026-01-01T23:49:09.134190959Z","close_reason":"Cancelled - systemd approach was overkill. Simpler OpenCode API injection approach preferred.","dependencies":[{"issue_id":"llm-tools-cnc","depends_on_id":"llm-tools-p1u","type":"blocks","created_at":"2026-01-01T23:43:03.757749882Z","created_by":"daemon"}]}
{"id":"llm-tools-crr","title":"Split BD_BRANCH export into separate commit","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T05:49:27.876541343Z","created_by":"cbarber","updated_at":"2026-01-11T05:49:27.876541343Z"}
{"id":"llm-tools-csg","title":"refactor: rename project to nixsmith","description":"Rename project from llm-tools to nixsmith to better reflect purpose and align with existing nixsmith namespace used in configs.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T21:39:22.698505543-05:00","created_by":"cbarber","updated_at":"2025-12-29T21:39:35.976932287-05:00"}
{"id":"llm-tools-cw6","title":"Evaluate if spr should replace forge pr create as default workflow","description":"We successfully dog-fooded spr workflow (15 PRs landed). Key benefits:\n\nADVANTAGES:\n- Each commit = independent PR (parallel review)\n- Automatic stack management (spr update, spr merge)\n- Easy reordering/editing via git rebase\n- Clear dependency visualization (spr status)\n- Forces atomic commits (each must stand alone)\n\nTRADE-OFFS:\n- Learning curve (different from forge pr create)\n- Requires understanding of git rebase --autosquash\n- Branch must track origin/main (not intuitive)\n- Stack breaks if anyone merges via GitHub UI\n- More complex for simple single-commit PRs\n\nQUESTIONS:\n1. Should AGENTS.md default to spr workflow?\n2. When to use forge pr create vs spr?\n3. Should temper pr workflow template switch to spr?\n4. Does this work well with protected branches/CODEOWNERS?\n\nDecision impacts agent prompts, documentation, and new user experience.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-31T02:06:03.737972589Z","created_by":"cbarber","updated_at":"2026-01-31T02:06:03.737972589Z"}
{"id":"llm-tools-d1w","title":"Add forge pr review-reply command for threaded review comment replies","description":"Currently forge only supports general PR comments via 'pr comment', but agents often need to reply to specific code review comments on file lines.\n\nProblem:\n- 'forge pr review-comments 6' shows review comments (read-only)\n- 'forge pr comment 6 text' posts general comment (not threaded to specific review)\n- No way to reply to specific file/line review comments through forge\n\nProposed solution:\nAdd 'pr review-reply' command that posts threaded replies to specific review comments.\n\nExample workflow:\n$ forge pr review-comments 6\n[1] tools/fix-beads-hooks:33-34 @ be29b8f [comment-id: 123456]\n    Comment: Woah. This is bad...\n\n$ forge pr review-reply 6 123456 \"Fixed in commit abc123\"\nPosted reply to review comment 123456\n\nInvestigation needed:\n- Check if gh/tea CLI support review comment replies via API\n- If not supported, document limitation in help text\n- Consider interactive mode for easier workflow","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-31T14:28:44.763223271Z","created_by":"cbarber","updated_at":"2026-01-01T22:34:20.214502005Z","closed_at":"2026-01-01T22:34:20.214502005Z","close_reason":"Closed"}
{"id":"llm-tools-dt3","title":"Extend temper with pre-edit, post-edit, post-push sections","description":"Add --event flag to temper. Maps event name (e.g., file.edited) to AGENTS.md section ## Workflow / ### \u003cevent-name\u003e. Backwards compatible with existing temper init section-based usage.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T04:18:45.67736618Z","created_by":"cbarber","updated_at":"2026-01-03T05:25:44.952197969Z","closed_at":"2026-01-03T05:25:44.952197969Z","close_reason":"Implemented --event flag. Backwards compatible with existing section-based usage. Ready for AGENTS.md event sections (llm-tools-qxq)."}
{"id":"llm-tools-enu","title":"Investigate OpenCode pre-edit hook support","description":"Implement pattern matching in plugin to map events to AGENTS.md sections. Pass event data to temper for section selection. Depends on event discovery and AGENTS.md patterns.","status":"blocked","priority":3,"issue_type":"task","created_at":"2026-01-03T04:18:50.928744407Z","created_by":"cbarber","updated_at":"2026-01-03T20:28:12.786291585Z","dependencies":[{"issue_id":"llm-tools-enu","depends_on_id":"llm-tools-qxq","type":"blocks","created_at":"2026-01-03T20:28:17.3274048Z","created_by":"daemon"}]}
{"id":"llm-tools-f6u","title":"Investigate combining pr-poll and forge into unified tool","description":"pr-poll and forge have overlapping responsibilities:\n- Both fetch PR data (pr view, pr comments)\n- pr-poll duplicates formatting logic that forge has\n- Would be cleaner as single tool with subcommands\n\nInvestigate if worth combining into:\n- forge pr watch (daemon mode)\n- forge pr format-thread \u003ccomment_id\u003e\n- Shared comment formatting/threading logic\n\nDecision: combine if it reduces \u003e100 LOC duplication","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T05:08:18.737199586Z","created_by":"cbarber","updated_at":"2026-01-11T05:08:18.737199586Z"}
{"id":"llm-tools-f6z","title":"Implement automatic cleanup of agent work directory on shell exit","description":"Question from user: does nix have a postShellHook for cleanup? Research: 1) How to create mktemp directory in shellHook, 2) How to ensure cleanup on shell exit (trap? nix hook?), 3) Should cleanup use rm -rf or safer alternative (prevent symlink following), 4) Integration with agent-sandbox.sh. Goal: jail agents to project dir + auto-cleaned temp workspace.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T20:57:48.120253227-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:57:48.120253227-05:00"}
{"id":"llm-tools-f89","title":"Package Go workflow tool in Nix flake","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T03:55:34.10031683Z","created_by":"cbarber","updated_at":"2026-01-03T03:56:24.143661218Z","closed_at":"2026-01-03T03:56:24.143661218Z","close_reason":"Duplicate tasks, using llm-tools-8ni series instead"}
{"id":"llm-tools-fug","title":"pr-poll sends duplicate notifications for PRs with missing state","description":"FIVE BUGS - BUG #3 WORKAROUND APPLIED:\n\n1. **pr-poll daemon dies silently**: Died at 00:34 UTC. Fixed by shell restart.\n\n2. **pr-poll only monitors last PR per session** [FIXED in PR #17 - MERGED]: Used `tail -1`. Fix deployed.\n\n3. **Duplicate notifications** [ROOT CAUSE + WORKAROUND]: Empty state file causes repeated notifications. When .pr-poll-state.json is empty/missing, prev_pr_state='unknown' on every check (line 108), triggering notifications every 30s. Received 4 duplicate notifications for PR #4.\n   **Workaround**: `echo '{}' \u003e .pr-poll-state.json` to initialize properly.\n   **Proper fix needed**: pr-poll should initialize state file with '{}' if missing/empty.\n\n4. **Daemon didn't auto-start**: pr-poll file missing from working tree. Restored with `git checkout HEAD -- tools/pr-poll`.\n\n5. **State file gets wiped**: Unknown cause. May be related to daemon crashes, branch switches, or concurrent writes.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-05T03:27:42.306879835Z","created_by":"cbarber","updated_at":"2026-01-11T11:58:54.141925727Z","closed_at":"2026-01-11T11:58:54.141925727Z","close_reason":"Fixed in commit 958b5c8 - pr-poll now treats null state as unknown, preventing duplicate notifications when state file is empty"}
{"id":"llm-tools-fzf","title":"Remove show_status from anvil (low value)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-03T01:59:10.52185865Z","created_by":"cbarber","updated_at":"2026-01-03T01:59:10.52185865Z"}
{"id":"llm-tools-ghu","title":"feat: integrate TabbyML for local code completion","description":"TabbyML with Qwen2.5-Coder-0.5B offers fast local code completion without internet. Could provide more private/isolated approach when agents connect to it instead of external APIs.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-29T21:39:21.886219301-05:00","created_by":"cbarber","updated_at":"2025-12-29T21:39:34.769461608-05:00"}
{"id":"llm-tools-i5s","title":"Implement post-push hook: PR subscription tracking","description":"Display 'üì° Subscribed to PR #N' after pushing to PR branch. Store subscription state for notification routing. Solves llm-tools-8jk routing ambiguity.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T03:55:50.905969642Z","created_by":"cbarber","updated_at":"2026-01-03T04:18:39.374858254Z","closed_at":"2026-01-03T04:18:39.374858254Z","close_reason":"Design changed: extending temper (bash) instead of Go engine per PR #13 feedback","dependencies":[{"issue_id":"llm-tools-i5s","depends_on_id":"llm-tools-8ni","type":"blocks","created_at":"2026-01-03T03:55:59.684272759Z","created_by":"daemon"}]}
{"id":"llm-tools-if2","title":"Implement post-edit hook: multi-concern detection","description":"Detect when changes span multiple logical concerns (docs, code, config). Nudge agents to commit atomically or split changes. Depends on Go prototype.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T03:55:48.557024147Z","created_by":"cbarber","updated_at":"2026-01-03T04:18:39.372770892Z","closed_at":"2026-01-03T04:18:39.372770892Z","close_reason":"Design changed: extending temper (bash) instead of Go engine per PR #13 feedback","dependencies":[{"issue_id":"llm-tools-if2","depends_on_id":"llm-tools-8ni","type":"blocks","created_at":"2026-01-03T03:55:59.670139658Z","created_by":"daemon"}]}
{"id":"llm-tools-im1","title":"Prototype Go workflow engine with basic hook system","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T03:55:30.172918961Z","created_by":"cbarber","updated_at":"2026-01-03T03:56:24.131602879Z","closed_at":"2026-01-03T03:56:24.131602879Z","close_reason":"Duplicate tasks, using llm-tools-8ni series instead"}
{"id":"llm-tools-jp6","title":"Discover OpenCode event data shapes and design pattern matching","description":"Discovery complete. Only tool.execute.before fires, and only for bash. Read/edit/write tools don't fire events. file.edited doesn't exist. Must pivot to bash-only hooks for git commands (commit, push). See .opencode/FINAL_FINDINGS.md","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T20:28:09.34139072Z","created_by":"cbarber","updated_at":"2026-01-03T20:58:30.773775941Z","closed_at":"2026-01-03T20:58:30.773775941Z","close_reason":"Event discovery complete. Conclusion: bash-only hooks possible. Next: design bash-based workflow hooks for git commands."}
{"id":"llm-tools-jqm","title":"Agent API authentication for gh/tea CLI","description":"Deploy keys provide git push/pull via SSH, but agents also need API access for forge operations (creating PRs, commenting, approving). Currently missing:\n\n**Problem:**\n- forge wrapper requires `gh`/`tea` CLI to be authenticated\n- Deploy keys only cover git operations, not API calls\n- Don't want agents using dev's personal API tokens (security/sandbox concern)\n\n**Solution Options:**\n1. Agent-specific GitHub/Gitea API tokens (scoped permissions)\n2. Mount tokens read-only in sandbox (similar to deploy keys)\n3. Configure in agent shell setup (similar to setup-agent-keys.sh)\n\n**Scope Required:**\n- GitHub: repo (full), read:org\n- Gitea: Equivalent repository access\n\n**Integration:**\n- Environment variable: GH_TOKEN, TEA_TOKEN\n- Or CLI native auth: `gh auth login --with-token`, `tea login add`\n- Mount location: ~/.config/gh/hosts.yml (gh), ~/.config/tea/config.yml (tea)\n\n**Related:**\n- tools/AGENT_SSH_KEYS.md documents deploy key pattern\n- This is API equivalent of that security model\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T10:55:35.421730143-05:00","created_by":"cbarber","updated_at":"2025-12-29T16:54:16.04385045-05:00","closed_at":"2025-12-29T16:54:16.04385045-05:00"}
{"id":"llm-tools-m8t","title":"Build MCP server for workflow state integration","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T03:55:33.162476574Z","created_by":"cbarber","updated_at":"2026-01-03T03:56:24.141687144Z","closed_at":"2026-01-03T03:56:24.141687144Z","close_reason":"Duplicate tasks, using llm-tools-8ni series instead"}
{"id":"llm-tools-m9c","title":"Fix beads git hooks shebang for NixOS compatibility","description":"Beads git hooks use #!/bin/sh shebang which doesn't exist on NixOS. Need to either: 1) Use #!/usr/bin/env sh (but /usr/bin/env also doesn't exist on NixOS), 2) Use full nix store path (fragile, changes with nix updates), or 3) Fix in beads itself to detect environment. Current workaround: sed to replace shebang with full path on installation.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-28T14:19:31.315300921-05:00","created_by":"cbarber","updated_at":"2025-12-28T14:25:44.888746401-05:00"}
{"id":"llm-tools-ol8","title":"Create systemd service/timer for pr-poller","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T23:42:58.89632046Z","created_by":"cbarber","updated_at":"2026-01-01T23:49:09.138302805Z","closed_at":"2026-01-01T23:49:09.138302805Z","close_reason":"Cancelled - systemd approach was overkill. Simpler OpenCode API injection approach preferred.","dependencies":[{"issue_id":"llm-tools-ol8","depends_on_id":"llm-tools-cnc","type":"blocks","created_at":"2026-01-01T23:43:03.773698278Z","created_by":"daemon"}]}
{"id":"llm-tools-ov5","title":"Implement post-edit hook: multi-concern detection","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T03:55:31.669874374Z","created_by":"cbarber","updated_at":"2026-01-03T03:56:24.137959896Z","closed_at":"2026-01-03T03:56:24.137959896Z","close_reason":"Duplicate tasks, using llm-tools-8ni series instead"}
{"id":"llm-tools-p1u","title":"Design PR polling notification system for real-time review feedback","description":"## Problem\n\nAgents only check PR status when explicitly running `forge pr status` or at session start. Review comments and approvals sit unnoticed until next manual check.\n\n## Goal\n\nAdd PR status context to active OpenCode sessions when updates occur (comments, reviews, merges).\n\n## Investigation\n\nCan we use OpenCode's session API (like opencode-beads does) to inject PR updates into running sessions?\n\n## Success Criteria\n\n- PR updates appear in OpenCode session context without manual intervention\n- Simple, cross-platform solution (no systemd/OS dependencies)\n- Minimal polling overhead","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-01T23:33:24.334358682Z","created_by":"cbarber","updated_at":"2026-01-02T02:13:51.787570934Z","closed_at":"2026-01-02T02:13:51.787570934Z","close_reason":"Completed PR polling notification system. Built anvil (session messaging), pr-notify (PR-aware notifications), and pr-poll (change detection daemon). System successfully detects and notifies on PR status/comment changes. Manual start required due to exec limitations."}
{"id":"llm-tools-qjl","title":"Design: Workflow hooks for atomic commits and PR subscription","description":"## Problem\n\nAgents make non-atomic commits because there's no enforcement/guidance at the right workflow moments. PR subscription is implicit, causing notification routing issues.\n\n## Missing Workflow Hooks\n\n**Pre-Edit Hook:**\n- Remind relevant development guidelines (atomicity, terseness, no comments)\n- Show current git status (uncommitted changes)\n- Warn if mixing concerns\n\n**Post-Edit Hook:**\n- Encourage commit (new or fixup)\n- Detect if change should fixup previous commit\n- Suggest git-absorb for auto-fixup\n\n**Post-Push/PR Hook:**\n- Explicit session message: \"üì° Subscribed to PR #NUMBER notifications\"\n- Makes PR subscription visible in session context\n- Solves notification routing ambiguity\n\n## Architecture Considerations\n\n**Current (Bash):**\n- Complex string manipulation\n- No structured state\n- Hard to maintain event hooks\n\n**Proposed (Golang):**\n- Event-driven workflow engine\n- Structured git operations (go-git)\n- MCP server for session integration\n- Cleaner hook implementation\n- Better testability\n\n## Related Issues\n\n- llm-tools-txa: git-absorb research\n- llm-tools-8jk: PR notification routing (solved symptom, not root cause)\n- Non-atomic commits in PR #12 (let slide, but pattern persists)\n\n## Next Steps\n\n1. Design workflow hook architecture\n2. Evaluate Golang vs Bash for implementation\n3. Prototype pre-edit/post-edit hooks\n4. Integrate git-absorb or equivalent\n5. Add explicit PR subscription messaging\n\n## Additional Problem: Notification Loops\n\nThe current pr-poll implementation has state management issues:\n- Empty or corrupted state file causes infinite re-notifications\n- No idempotency - same PR change notified multiple times\n- Unclear daemon lifecycle (when does it start/stop?)\n\n**Example:** PR #12 merge triggered continuous notifications because state wasn't properly initialized after branch switch.\n\n**Requirements for new design:**\n- Idempotent notifications (track what's been delivered)\n- Proper daemon lifecycle management\n- State recovery/reset mechanisms\n- Clear session subscription/unsubscription","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-03T03:44:34.464768486Z","created_by":"cbarber","updated_at":"2026-01-03T05:14:10.161641228Z","closed_at":"2026-01-03T04:20:03.082093312Z","close_reason":"Design complete and updated per PR #13 feedback. Implementation tasks created: llm-tools-dt3 (temper), qxq (AGENTS.md), sly (forge), enu (plugin)."}
{"id":"llm-tools-qm9","title":"Implement pre-edit hook: guidelines and git status","description":"Show development guidelines, display git status, warn about mixed concerns before edits. Depends on Go prototype completion.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T03:55:46.407978543Z","created_by":"cbarber","updated_at":"2026-01-03T04:18:39.370486312Z","closed_at":"2026-01-03T04:18:39.370486312Z","close_reason":"Design changed: extending temper (bash) instead of Go engine per PR #13 feedback","dependencies":[{"issue_id":"llm-tools-qm9","depends_on_id":"llm-tools-8ni","type":"blocks","created_at":"2026-01-03T03:55:59.654617199Z","created_by":"daemon"}]}
{"id":"llm-tools-qog","title":"Support XDG git config in sandbox","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-31T14:40:46.573293797Z","created_by":"cbarber","updated_at":"2025-12-31T14:41:57.672223489Z","closed_at":"2025-12-31T14:41:57.672223489Z","close_reason":"Fixed by mounting ~/.config/git/config in Linux sandbox"}
{"id":"llm-tools-qq8","title":"Research contextual instruction injection patterns","description":"How do others solve workflow-stage-specific prompting? AGENTS.md composition strategies? Small steps to embrace it?","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T16:02:01.231342482Z","created_by":"cbarber","updated_at":"2026-01-01T18:04:21.664867777Z","closed_at":"2026-01-01T18:04:21.664867777Z","close_reason":"Comprehensive research completed on non-interactive commit splitting techniques"}
{"id":"llm-tools-qxq","title":"Add pre-edit, post-edit, post-push sections to AGENTS.md","description":"Add workflow sections to AGENTS.md with pattern matching syntax. Depends on event discovery to know what patterns to match. Example: ### dev guidelines (tool.execute.before Edit) triggers on Edit tool before execution.","status":"blocked","priority":1,"issue_type":"task","created_at":"2026-01-03T04:18:47.526927835Z","created_by":"cbarber","updated_at":"2026-01-03T20:28:11.21559815Z","dependencies":[{"issue_id":"llm-tools-qxq","depends_on_id":"llm-tools-jp6","type":"blocks","created_at":"2026-01-03T20:28:17.311850575Z","created_by":"daemon"}]}
{"id":"llm-tools-s4e","title":"Implement post-push hook: PR subscription tracking","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T03:55:32.400816968Z","created_by":"cbarber","updated_at":"2026-01-03T03:56:24.13982363Z","closed_at":"2026-01-03T03:56:24.13982363Z","close_reason":"Duplicate tasks, using llm-tools-8ni series instead"}
{"id":"llm-tools-se7","title":"forge pr view should auto-detect PR from current branch","description":"Make forge pr view, pr review-comments, and pr reviews work without explicit PR number by:\n1. Detecting current branch name\n2. Using gh pr view or tea pr list to find PR for this branch\n3. Auto-using that PR number\n\nThis improves agent ergonomics - they shouldn't need to track PR numbers manually.\n\nExample:\nbash tools/forge pr view          # finds PR for current branch\nbash tools/forge pr review-comments  # same\n\nFallback: If no PR found or not on a branch, require explicit number with helpful error.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-29T15:32:57.543037698-05:00","created_by":"cbarber","updated_at":"2025-12-29T16:03:07.549428878-05:00","closed_at":"2025-12-29T16:03:07.549428878-05:00"}
{"id":"llm-tools-sly","title":"Update forge post-push to write .git/pr-subscription","description":"After git push, detect PR number and write to .git/pr-subscription for anvil routing. Display 'üì° Subscribed to PR #N' message.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T04:18:49.278890961Z","created_by":"cbarber","updated_at":"2026-01-03T04:18:49.278890961Z"}
{"id":"llm-tools-sxg","title":"pr-poll doesn't scale for stacked PR workflows","description":"pr-poll only monitors PRs mentioned in session messages. For stacked PRs (14+ PRs per branch), most PRs are invisible. Need to discover PRs via spr status or GitHub API instead of session scraping.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-31T02:02:27.255557777Z","created_by":"cbarber","updated_at":"2026-01-31T02:05:26.926924165Z"}
{"id":"llm-tools-sxl","title":"Create troubleshooting guide for common spr failures","description":"During the stacked PR epic, we encountered several spr failure modes:\n\nCOMMON FAILURES:\n1. Expired GitHub token ‚Üí spr segfault (llm-tools-0ae)\n2. Branch names with slashes ‚Üí spr fails to parse\n3. Branch not tracking origin/main ‚Üí spr compares to wrong base\n4. Someone merges via GitHub UI ‚Üí stack breaks\n5. Force push conflicts ‚Üí need --force-with-lease understanding\n\nNEEDED:\n- Troubleshooting guide with error messages and solutions\n- Pre-flight checks before spr update (token valid, branch tracking correct)\n- Recovery procedures (rebase onto new main, rebuild stack)\n- Clear error messages when spr fails (not segfaults)\n\nThis would prevent lost time debugging the same issues repeatedly.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-31T02:06:13.506431943Z","created_by":"cbarber","updated_at":"2026-01-31T02:06:13.506431943Z"}
{"id":"llm-tools-txa","title":"Research git tools for atomic commits and stacked diffs","description":"Investigate git-absorb, spr, jujutsu, git-branchless for LLM agent workflows. Focus on: 1) Auto-fixing mixed commits (git-absorb), 2) Stacked diffs vs atomic commits workflow, 3) Non-interactive tooling for agents, 4) Integration into llm-tools agent workflow. Goal: Make commit management more precise and less error-prone for agents.\n\n## Real-world test case from PR #9\n\nAgent made non-atomic commits while addressing PR feedback:\n- Commit 1 (36af904): Added pr review-reply feature + docs examples (should be feature only)\n- Commit 2 (8e03cc1): Removed handoff guidance + modified other docs (itemizing, not atomic)\n- Commit 3 (a95086b): Refactored pr comments + fixed handoff (itemizing, multiple changes)\n\nWhen asked to fix commits to be atomic, agent attempted:\n1. Created backup branch\n2. Soft reset to origin/main\n3. Tried to checkout backup branch ‚Üí failed with uncommitted changes\n4. Got stuck in broken state (can't use interactive rebase due to -i restriction)\n\n## What atomic commits should have been:\n\n1. `feat(forge): add pr review-reply command`\n   - Only the pr_review_reply() function and routing\n   - Only usage text changes for the new command\n   - No documentation examples\n\n2. `refactor(forge): unify pr comments into single command`\n   - pr_comments() replaces pr_review_comments()\n   - pr_view() integration\n   - Usage text updates\n   - Breaking change: remove review-comments command\n\n3. `docs(workflow): update handoff guidance for temper integration`\n   - AGENTS.md handoff changes\n   - default.md handoff changes\n   - Add forge pr status to handoff template\n   - Add pr review-reply and pr comments examples\n\n## Requirements for solution:\n\n- Must work without interactive rebase (-i forbidden for agents)\n- Must handle mixed commits that cross logical boundaries\n- Must be recoverable when agent gets stuck\n- Should prevent mixed commits in the first place (guidance or tooling)\n- Should detect when changes span multiple logical units before committing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T19:57:32.482537114Z","created_by":"cbarber","updated_at":"2026-01-06T03:53:40.376411078Z","closed_at":"2026-01-06T03:53:40.376411078Z","close_reason":"Packaged spr and git-absorb, integrated into workflow, added compaction hook"}
{"id":"llm-tools-tze","title":"Extract shell hooks to separate script files","description":"Extract shell hooks from agents/*/default.nix into separate .sh files to avoid Nix string escaping issues (double-quote-quote-dollar-brace breaks tree-sitter), improve diff clarity, and follow existing setup-*.sh pattern. Benefits: better syntax highlighting, easier testing, cleaner version control.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T18:19:38.457290933-05:00","created_by":"cbarber","updated_at":"2025-12-27T19:32:10.563797044-05:00","closed_at":"2025-12-27T19:32:10.563797044-05:00","close_reason":"Extracted shell hooks from agents/*/default.nix into separate setup-shell.sh files. This improves syntax highlighting, eliminates Nix string escaping issues, and makes diffs cleaner."}
{"id":"llm-tools-u3y","title":"Build MCP server for workflow state integration","description":"Expose workflow state (PR subscriptions, uncommitted changes) to agents via MCP. Enable auto-injection of workflow context into sessions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T03:55:52.663607922Z","created_by":"cbarber","updated_at":"2026-01-03T04:18:39.376788138Z","closed_at":"2026-01-03T04:18:39.376788138Z","close_reason":"Design changed: extending temper (bash) instead of Go engine per PR #13 feedback","dependencies":[{"issue_id":"llm-tools-u3y","depends_on_id":"llm-tools-qm9","type":"blocks","created_at":"2026-01-03T03:56:06.126552648Z","created_by":"daemon"},{"issue_id":"llm-tools-u3y","depends_on_id":"llm-tools-if2","type":"blocks","created_at":"2026-01-03T03:56:06.142337106Z","created_by":"daemon"},{"issue_id":"llm-tools-u3y","depends_on_id":"llm-tools-i5s","type":"blocks","created_at":"2026-01-03T03:56:06.156283569Z","created_by":"daemon"}]}
{"id":"llm-tools-y7o","title":"Improve forge help to clarify review comments vs general comments","description":"Agent confusion: tried to use 'forge pr comment' to reply to code review comments, but it only posts general PR comments. The distinction between review comments (file/line) and general comments isn't clear.\n\nCurrent help shows:\n  pr comment [NUMBER] TEXT\n  pr review-comments [NUMBER] [--json]\n\nIssues:\n1. Doesn't clarify that 'pr comment' posts general comments only\n2. Doesn't explain that review-comments is read-only\n3. No guidance on how to reply to review comments\n4. Missing common workflow examples\n\nImprovements:\n1. Add clarifying descriptions:\n   pr comment [NUMBER] TEXT            # Post general PR comment (not threaded reply)\n   pr review-comments [NUMBER]         # View code review comments (read-only)\n\n2. Add --examples flag with common workflows\n3. Better error messages suggesting correct commands\n4. Document limitations (if review replies aren't supported)\n\nReal-world agent mistake:\n- Wanted to reply to specific review comment on line 33\n- Used 'pr comment' thinking it would thread the reply\n- Actually posted general comment instead\n- Should have been guided to correct approach","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T14:28:51.347704582Z","created_by":"cbarber","updated_at":"2025-12-31T14:28:51.347704582Z"}
{"id":"llm-tools-y7q","title":"Research Jujutsu (jj) VCS for LLM agent automation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-01T19:20:26.266776874Z","created_by":"cbarber","updated_at":"2026-01-01T19:20:26.266776874Z"}
{"id":"llm-tools-yyo","title":"Explore chroot for CLI agent startup constraints","description":"Investigate using chroot to constrain CLI agents on startup for better security and isolation. Requirements: provide /tmp access, use mktemp for agent work directory, remove work directory on exit (no symlink following). Benefits: prevent agents from accessing files outside project scope, temporary workspace cleanup, reduced security risk. Considerations: how to handle tool access (git, editors, etc), bind mounts for necessary directories, performance impact.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T19:05:06.440200388-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:48:29.088854106-05:00","closed_at":"2025-12-27T20:48:29.088854106-05:00","close_reason":"Completed exploration: bubblewrap preferred over chroot, created prototype sandbox wrapper"}
{"id":"llm-tools-z1y","title":"Add language tooling cache directories with BWRAP_EXTRA_PATHS extensibility","description":"Language tools need cache access: ~/.cache/go-build, ~/.cargo, ~/.cache/pip, ~/.gem, ~/.cache/yarn, ~/.npm, ~/.local/share/pnpm, ~/.bun, etc. Current approach: manually add each. Problems: 1) Don't want blanket ~/.cache access (too permissive), 2) Language detection is hacky, 3) Hard to maintain growing list. Solution: Add BWRAP_EXTRA_PATHS env var that agent shells and projects can extend. Example: BWRAP_EXTRA_PATHS='/home/user/.cargo:/home/user/.cache/go-build' converts to --bind mounts automatically. Allows: setup-shell.sh adds agent-specific paths, project .envrc adds project-specific paths, clean extensibility without modifying core sandbox script.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T13:15:07.983222452-05:00","created_by":"cbarber","updated_at":"2025-12-28T13:46:33.335973263-05:00","closed_at":"2025-12-28T13:46:33.335973263-05:00"}
{"id":"llm-tools-z4s","title":"Automate agent workflow: issue ‚Üí branch ‚Üí PR ‚Üí merge","description":"Full automation loop: 1) Select beads issue 2) Create branch 3) Agent implements solution 4) Create PR 5) Process feedback 6) Repeat 3-5 until approved 7) Merge. Target ecosystems: GitHub and Gitea.\n\n## Research Complete\n\n**Key Findings:**\n- octo.nvim: GitHub-only, no Gitea support planned\n- gh vs tea: Very similar commands, easy to abstract\n- User workflow: zellij panes for agent + review (nvim/fugitive)\n- Core pain point: Context switching friction between review and agent feedback\n\n**MVP Approach:**\n- forge CLI wrapper (tools/forge) provides unified GitHub/Gitea interface\n- Agent creates PR, polls for comments asynchronously\n- User reviews in terminal (nvim/fugitive), adds comments via forge\n- Agent addresses feedback with --fixup commits for atomic hygiene\n- No headless automation yet - stay in existing zellij workflow\n\n**Completed:**\n- ‚úÖ Added tea CLI for Gitea support (tools/default.nix)\n- ‚úÖ Created forge wrapper with LCD commands (tools/forge)\n- ‚úÖ Documented PR workflow in AGENTS.md\n\n**Next Steps:**\n1. Dog-food the PR workflow pattern (agent creates PR from this work)\n2. Test forge with actual GitHub authentication\n3. Evaluate polling cadence (manual check vs periodic)\n4. Consider pub/sub patterns (webhooks ‚Üí Discord ‚Üí agent) for Phase 2\n5. Research multi-agent per repo via worktrees (long-term)\n\n**Out of Scope (Separate Issues):**\n- #setup shell for agent tooling (llm-tools-bh9)\n- octo.nvim integration (GitHub-only, optional enhancement)\n- Neovim plugin for Gitea (no existing solution)\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T23:06:29.501820028-05:00","created_by":"cbarber","updated_at":"2025-12-29T15:33:45.109868934-05:00","closed_at":"2025-12-29T15:33:45.109868934-05:00","dependencies":[{"issue_id":"llm-tools-z4s","depends_on_id":"llm-tools-jqm","type":"blocks","created_at":"2025-12-29T10:56:00.57145679-05:00","created_by":"daemon"}]}
{"id":"llm-tools-zel","title":"Package Go workflow tool in Nix flake","description":"Add Go workflow engine to tools/default.nix. Make available in claude-code and opencode agent shells. Use nix-init for package scaffolding.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T03:55:54.693732123Z","created_by":"cbarber","updated_at":"2026-01-03T04:18:39.378753841Z","closed_at":"2026-01-03T04:18:39.378753841Z","close_reason":"Design changed: extending temper (bash) instead of Go engine per PR #13 feedback"}
{"id":"llm-tools-zq7","title":"Integrate PR updates into temper init","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T23:42:59.851087951Z","created_by":"cbarber","updated_at":"2026-01-01T23:49:09.140394658Z","closed_at":"2026-01-01T23:49:09.140394658Z","close_reason":"Cancelled - systemd approach was overkill. Simpler OpenCode API injection approach preferred.","dependencies":[{"issue_id":"llm-tools-zq7","depends_on_id":"llm-tools-ol8","type":"blocks","created_at":"2026-01-01T23:43:03.787724519Z","created_by":"daemon"}]}
{"id":"llm-tools-zwk","title":"feat: add CI status check for PR review finalization","description":"Add ability to retrieve CI/test status for PRs before finalizing review. Should integrate with forge tool to show test results.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-29T21:43:14.410076144-05:00","created_by":"cbarber","updated_at":"2025-12-29T21:43:14.410076144-05:00"}
