{"id":"llm-tools-0jy","title":"Add next-session handoff prompt to session completion template","description":"Problem: The 'Landing the Plane' section in AGENTS.md step 7 says 'Hand off - Provide context for next session' but doesn't specify the format. This causes agents to provide summaries TO the user instead of preparing a prompt FOR the next AI session, breaking continuity between sessions.\n\nProposed Solution:\nUpdate both agents/templates/default.md (shared template) and AGENTS.md (this repo's instructions) to clarify step 7 should produce a ready-to-paste prompt containing:\n- Current repository state (branch, commit hash, working tree status)\n- What was just completed (closed issues, commits pushed)\n- Ready issues with IDs and priorities\n- Important context for continuity\n\nExample format:\n```\n## Next Session Prompt\n\nCurrent State (YYYY-MM-DD)\n- Branch: main (abc1234)\n- Working tree: clean\n- Recent work: [summary]\n\nReady Issues:\n1. issue-id (P1): Title\n   - Key context\n\n2. issue-id (P2): Title\n   - Key context\n\nContext:\n- Important details for next session\n```\n\nThis ensures the next AI session has proper context without requiring the user to manually brief it.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T20:42:43.994565298-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:45:09.286013179-05:00","closed_at":"2025-12-27T20:45:09.286013179-05:00","close_reason":"Added explicit handoff prompt format to AGENTS.md and agents/templates/default.md"}
{"id":"llm-tools-ak0","title":"Refactor CLAUDE.local.md to AGENTS.md with CLAUDE.md symlink","description":"Reconcile CLAUDE.md and AGENTS.md by making AGENTS.md the primary file with CLAUDE.md as a symlink. This consolidates documentation and follows beads convention. Will require updating CLAUDE file checking logic in shell setup to handle symlinks. Currently we check for CLAUDE.md or CLAUDE.local.md - need to add AGENTS.md to precedence and create CLAUDE.md symlink when appropriate.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T18:20:02.501412493-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:22:20.590433067-05:00","closed_at":"2025-12-27T20:22:20.590433067-05:00","close_reason":"Refactored shell setup to use AGENTS.md as primary file with CLAUDE.md as symlink. Tested template creation and backward compatibility with existing CLAUDE.md files."}
{"id":"llm-tools-bd5","title":"Test and validate bubblewrap agent sandboxing","description":"Verify the agent-sandbox.sh prototype actually works as intended. Test cases: 1) Can agent access files outside project dir? 2) Does mktemp work directory get created? 3) Is cleanup reliable on exit? 4) Do agents have necessary tool access (git, editors)? 5) Performance impact measurement. The exploration in llm-tools-yyo was closed prematurely - research and prototype don't equal validation.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T20:57:44.693271035-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:57:44.693271035-05:00"}
{"id":"llm-tools-boh","title":"Review completed work incrementally instead of batch completing","description":"User feedback: I worked on three issues (llm-tools-0jy, llm-tools-bzj, llm-tools-yyo) without pausing for review after completing each one. Better approach: complete one issue, ask for user review/feedback, then proceed to next. This allows course correction and ensures work meets expectations before moving forward. Apply to future sessions.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T20:57:51.488278735-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:57:51.488278735-05:00"}
{"id":"llm-tools-bzj","title":"Support user-specific templates for CLAUDE/AGENTS.md","description":"Allow users to customize agent templates based on their username/GitHub handle. Potential approaches: 1) Nix flake variant: nix develop ~/src/llm-tools#claude-code.cbarber 2) Auto-detect from USER env var or git config user.name 3) Template directory structure: agents/claude-code/templates/{default,cbarber,etc}.md. Benefits: personalized instructions, team-specific workflows, easy to share common patterns. Depends on: llm-tools-ak0 (CLAUDE/AGENTS.md refactor). Consider: template precedence, fallback to default, documentation for creating custom templates.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T19:10:43.280685476-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:47:03.821065114-05:00","closed_at":"2025-12-27T20:47:03.821065114-05:00","close_reason":"Implemented user-specific template support with fallback to default","dependencies":[{"issue_id":"llm-tools-bzj","depends_on_id":"llm-tools-ak0","type":"blocks","created_at":"2025-12-27T19:10:52.254480336-05:00","created_by":"daemon"}]}
{"id":"llm-tools-f6z","title":"Implement automatic cleanup of agent work directory on shell exit","description":"Question from user: does nix have a postShellHook for cleanup? Research: 1) How to create mktemp directory in shellHook, 2) How to ensure cleanup on shell exit (trap? nix hook?), 3) Should cleanup use rm -rf or safer alternative (prevent symlink following), 4) Integration with agent-sandbox.sh. Goal: jail agents to project dir + auto-cleaned temp workspace.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T20:57:48.120253227-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:57:48.120253227-05:00"}
{"id":"llm-tools-tze","title":"Extract shell hooks to separate script files","description":"Extract shell hooks from agents/*/default.nix into separate .sh files to avoid Nix string escaping issues (double-quote-quote-dollar-brace breaks tree-sitter), improve diff clarity, and follow existing setup-*.sh pattern. Benefits: better syntax highlighting, easier testing, cleaner version control.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T18:19:38.457290933-05:00","created_by":"cbarber","updated_at":"2025-12-27T19:32:10.563797044-05:00","closed_at":"2025-12-27T19:32:10.563797044-05:00","close_reason":"Extracted shell hooks from agents/*/default.nix into separate setup-shell.sh files. This improves syntax highlighting, eliminates Nix string escaping issues, and makes diffs cleaner."}
{"id":"llm-tools-yyo","title":"Explore chroot for CLI agent startup constraints","description":"Investigate using chroot to constrain CLI agents on startup for better security and isolation. Requirements: provide /tmp access, use mktemp for agent work directory, remove work directory on exit (no symlink following). Benefits: prevent agents from accessing files outside project scope, temporary workspace cleanup, reduced security risk. Considerations: how to handle tool access (git, editors, etc), bind mounts for necessary directories, performance impact.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T19:05:06.440200388-05:00","created_by":"cbarber","updated_at":"2025-12-27T20:48:29.088854106-05:00","closed_at":"2025-12-27T20:48:29.088854106-05:00","close_reason":"Completed exploration: bubblewrap preferred over chroot, created prototype sandbox wrapper"}
